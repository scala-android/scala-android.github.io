+++
date = "2014-07-11"
title = "Release 1.3.1"

+++


* Add `android:apkbuild-pickfirsts` works like `android:apkbuild-excludes` but picks the first occurrence of the resource.
** A bug in `com.android.tools.build:builder`, android bug #73437, (link) prevents `PackagingOptions` from working correctly with `JNI` libraries. A workaround is implemented copy all `JNI` to a single location first.
* `NDK` build process, similarly to `ANDROID_HOME`, set `ANDROID_NDK_HOME` to the location where the Android NDK is installed. Alternatively, `ndk.dir` can be set in a `local.properties` file for the project.
** libs will be generated into `binPath / "jni"` and obj will drop into `binPath / "obj"`
** Pre-generated JNI libraries will no longer be pulled out of `jni` (nor `src/main/jni`) -- they will be taken from `libs` (or `src/main/libs`)
*** This does not apply to `aar` and `apklib` - they will be pulled out of appropriate locations per their spec.
** `javah` is automatically executed on all classes that have native methods in their signatures. The header files are generated into `sourceManaged` and are available to include in native sources and `Android.mk` by adding `LOCAL_CFLAGS := -I$(SBT_SOURCE_MANAGED)`
** `collect-jni` no longer copies libraries, it only assembles a list of directory names for packaging
* Global plugin installation friendly
** For `sbt 0.13`, add to `~/.sbt/0.13/plugins/android.sbt`
** `addSbtPlugin("com.hanhuy.sbt" % "android-sdk-plugin" % "1.4.15")`
* New commands, all commands have proper tab-completion:
** `gen-android` - creates android projects from scratch with sbt plumbing
** `gen-android-sbt` - creates SBT files for an existing android project
** `logcat` - supports all regular options, non-polling (-d by default)
** `pidcat` - logcat the current package or specified package with TAG filters
** `adb-ls` - ls on-device
** `adb-cat` - cat a file on-device
** `adb-rm` - rm a file on-device
** `adb-shell` - execute a shell command on-device
** `adb-push` - push a file to device
** `adb-pull` - pull a file from device
** `reboot-device` renamed to `adb-reboot`
* Existing commands available globally
`devices`, `device`, `adb-wifi`
* `AutoBuild` support, (created automatically with `gen-android`), set your build to be object Build extends `android.AutoBuild `and settings will be automatically applied to projects as necessary.
* Update to latest `com.android.tools.build 0.12.x`
** Now requires android `build-tools 19.1.0` or newer
* `minSdkVersion` and `targetSdkVersion` are now `SettingKey[String]` and no longer `SettingKey[Int]` (support android-L)
* Instrumentation tests are now located in `src/main/androidTest` instead of `src/main/instrumentTest` (match layout generated by android create project)
* `android:dex` task now returns a folder for the output `dex` not a `classes.dex` file.
